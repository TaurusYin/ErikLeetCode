import time
import pandas as pd

from interview.quant import MovingAverage

mock_data = [
    (1360250000000.00, 15.07),
    (1360250000001.00, 14.89),
    (1360250000002.00, 14.45),
    (1360250000003.00, 14.3),
    (1360250000004.00, 14.94),
    (1360250000005.00, 13.93),
    (1360250000006.00, 14.33),
    (1360250000007.00, 14.17),
    (1360250000008.00, 13.62),
    (1360250000009.00, 13.57),
    (1360250000010.00, 13.6),
    (1360250000011.00, 13.14),
    (1360250000012.00, 13.28),
    (1360250000013.00, 13.49),
    (1360250000014.00, 13.37),
    (1360250000015.00, 13.5),
    (1360250000016.00, 14.01),
    (1360250000017.00, 14.52),
    (1360250000018.00, 14.7),
    (1360250000019.00, 14.99),
    (1360250000020.00, 14.85),
    (1360250000021.00, 15.14),
    (1360250000022.00, 15.54),
    (1360250000023.00, 15.98),
    (1360250000024.00, 16.45),
    (1360250000025.00, 15.8),
    (1360250000026.00, 16.48),
    (1360250000027.00, 17.13),
    (1360250000028.00, 17.21),
    (1360250000029.00, 17.1),
    (1360250000030.00, 16.92)
]

if __name__ == '__main__':
    '''
    file_path = '/Users/yineric/Downloads/archive/all_stocks_5yr.csv'
    t = pd.read_csv(file_path, usecols=['date', 'open']).head(2)
    '''
    from interview.mock_case import mock_data
    num_bin = 10
    window = 15.0
    ma = MovingAverage(num_bin=num_bin, window=window)
    start_time = time.time()
    ma.MockTask(mock_data=mock_data[:2])
    res = ma.Get(current_ts=1360250000001.99)
    end_time = time.time()
    print('time consume: {}'.format(end_time - start_time))
    print()
